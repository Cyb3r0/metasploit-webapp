<!DOCTYPE html>
<html lang="en">
<head>
	<% include ./partials/head %>
</head>
<body class="container">
	<header>
		<% include ./partials/header %>
	</header>

	<main>
		<div class="col-lg-12">
	        <ol class="breadcrumb">
	        	<li><a href="#">Metasploit App</a></li>
	        	<li class="active"> <%= workspace.name %> </li>
	        </ol>

	        <div class="panel panel-primary">
	        	<div class="panel-heading">
	        		<h3 class="panel-title">Information Gathering</h3>
	        	</div>
	        	<div class="panel-body">
	        		<a href="/workspaces/<%= workspace.id %>/hosts"><span id="hostsQuantity"></span> Hosts</a>
	        	</div>
	        	<div class="panel-footer">
	        		<form action="<%=workspace.id%>/tasks/new_scan" method="post">
	        			<input type="hidden" name="workspaceName" value="<%=workspace.name%>">
	        			<button type="submit" class="btn btn-default">Scan...</button>
	        		</form>
	        	</div>
	        </div>

	    </div>
	</main>

	<footer>
		<% include ./partials/footer %>
	</footer>

	<script>
		const workspace = <%- JSON.stringify(workspace)%>
        var source = new EventSource('/workspaces/'+workspace.id+'/getHostsQuantity');
        source.onmessage = function(e) {
			data = e.data;
            document.getElementById("hostsQuantity").innerHTML += data;
			source.close();
        }
        console.log(source)
	</script>

</body>
</html>